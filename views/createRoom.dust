<!DOCTYPE html>
<html>
  <head>
    <title>{title}</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body onload='init()'>
    <h1>{title}</h1>
    <p>Create a room</p>
    <form id='createRoom' method="POST">
        <input type="text" name="roomName" placeholder="Room ID">
        <input type="submit" value="Create">
    </form>
    <script src="/scripts/fetch.js" charset="utf-8"></script>
    <script>
    function init() {
        const form = document.getElementById('createRoom');
        form.addEventListener('submit', (event) => {
            event.preventDefault();
            const roomName = event.target[0].value;
            doFetchRequest('POST', '/room/create', {
                'Content-Type': 'application/json',
            }, JSON.stringify({
                roomName,
            })).then((res) => {
                if (res.status === 403) {
                    alert('Not logged in');
                } else if (res.status === 400) {
                    alert('Room already exists')
                } else {
                    alert('Room created');
                }
            });
        });
    }
    </script>
  </body>
</html>
